<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Almoxarifado Pro - Controle de Estoque</title>

  <!-- =======================
        CSS (INALTERADO)
       ======================= -->
  <style>
    *{margin:0;padding:0;box-sizing:border-box}
    :root{
      --primary:#00d4ff;--primary-dark:#00a8cc;--secondary:#7c3aed;
      --success:#10b981;--danger:#ef4444;--warning:#f59e0b;
      --bg-dark:#0f0f1e;--bg-darker:#0a0a14;--bg-card:#1a1a2e;--bg-hover:#252541;
      --text-primary:#e0e0ff;--text-secondary:#a0a0c0;--border:#3a3a5c;
    }
    html,body{height:100%}
    body{
      font-family:Segoe UI,Roboto,sans-serif;
      background:linear-gradient(135deg,var(--bg-dark),var(--bg-darker));
      color:var(--text-primary)
    }
    .app{display:grid;grid-template-columns:260px 1fr;height:100vh}

    /* SIDEBAR */
    .sidebar{
      background:var(--bg-card);
      border-right:1px solid var(--border);
      position:fixed;width:260px;height:100vh
    }
    .sidebar-header{
      padding:16px;font-weight:800;text-align:center;
      background:linear-gradient(135deg,var(--primary),var(--secondary));
      color:#000
    }
    .nav-item{
      padding:14px 16px;cursor:pointer;color:var(--text-secondary)
    }
    .nav-item:hover,.nav-item.active{
      background:var(--bg-hover);color:var(--primary)
    }

    /* CONTAINER */
    .container{margin-left:260px;display:flex;flex-direction:column;height:100vh}
    .header{
      padding:16px;background:linear-gradient(135deg,var(--primary),var(--secondary));
      color:#000;font-weight:800
    }
    .content{padding:16px;overflow:auto;flex:1}

    .produto-card{
      background:var(--bg-card);
      padding:12px;border-radius:8px;
      margin-bottom:10px;cursor:pointer
    }
    .produto-card:hover{background:var(--bg-hover)}

    .modal-overlay{
      display:none;position:fixed;top:0;left:0;width:100%;height:100%;
      background:rgba(0,0,0,.8);justify-content:center;align-items:center
    }
    .modal-overlay.active{display:flex}
    .modal-box{
      background:var(--bg-card);padding:20px;border-radius:10px;
      width:90%;max-width:600px
    }

    .btn{
      padding:10px 14px;border:none;border-radius:6px;
      font-weight:700;cursor:pointer
    }
    .btn-primary{background:var(--primary);color:#000}
    .btn-danger{background:var(--danger);color:#fff}
  </style>
</head>

<body>
<div class="app">

  <!-- SIDEBAR -->
  <div class="sidebar">
    <div class="sidebar-header">üì¶ ALMOXARIFADO</div>
    <div class="nav-item active" onclick="mudarSecao('estoque',this)">üì¶ Estoque</div>
    <div class="nav-item" onclick="mudarSecao('relatorio',this)">üìä Relat√≥rios</div>
    <div class="nav-item" onclick="abrirModal('modalDados')">üíæ Dados</div>
  </div>

  <!-- CONTAINER -->
  <div class="container">
    <div class="header" id="titulo">üì¶ ESTOQUE</div>

    <!-- ESTOQUE -->
    <div id="secEstoque" class="content"></div>

    <!-- RELAT√ìRIO -->
    <div id="secRelatorio" class="content" style="display:none">
      <h2>üìä Relat√≥rios</h2>
      <p>Total de produtos: <strong id="relTotal"></strong></p>
    </div>
  </div>
</div>

<!-- MODAL DADOS -->
<div class="modal-overlay" id="modalDados">
  <div class="modal-box">
    <h3>üíæ Dados</h3>
    <button class="btn btn-primary" onclick="exportarJSON()">üì§ Exportar JSON</button>
    <button class="btn btn-danger" onclick="limparDados()">üóëÔ∏è Limpar</button>
    <br><br>
    <button class="btn" onclick="fecharModal('modalDados')">Fechar</button>
  </div>
</div>

<script>
/* =======================
   DADOS
======================= */
const dadosIniciais = [
  {codigo1:"28912",codigo2:"28192",nome:"GUARDANAPO",estoqueAtual:40,estoqueMin:30,preco:0,setor:"CONSUMO"},
  {codigo1:"110500",codigo2:"110500",nome:"√ÅLCOOL 70",estoqueAtual:0,estoqueMin:100,preco:0,setor:"LIMPEZA"}
];

let produtos = [];

/* =======================
   INIT
======================= */
document.addEventListener("DOMContentLoaded",()=>{
  carregarDados();
  renderizar();
});

/* =======================
   FUN√á√ïES
======================= */
function carregarDados(){
  const raw = localStorage.getItem("produtosAlmox");
  produtos = raw ? JSON.parse(raw) : dadosIniciais;
  salvar(false);
}

function salvar(reload=true){
  localStorage.setItem("produtosAlmox",JSON.stringify(produtos));
  if(reload) renderizar();
}

function renderizar(){
  const area = document.getElementById("secEstoque");
  area.innerHTML = "";
  produtos.forEach(p=>{
    const div = document.createElement("div");
    div.className="produto-card";
    div.innerHTML = `
      <strong>${p.nome}</strong><br>
      Estoque: ${p.estoqueAtual}/${p.estoqueMin}
    `;
    area.appendChild(div);
  });
  document.getElementById("relTotal").textContent = produtos.length;
}

function mudarSecao(sec,el){
  document.getElementById("secEstoque").style.display = sec==="estoque"?"block":"none";
  document.getElementById("secRelatorio").style.display = sec==="relatorio"?"block":"none";
  document.getElementById("titulo").textContent = sec==="estoque"?"üì¶ ESTOQUE":"üìä RELAT√ìRIOS";
  document.querySelectorAll(".nav-item").forEach(n=>n.classList.remove("active"));
  el.classList.add("active");
}

function abrirModal(id){document.getElementById(id).classList.add("active")}
function fecharModal(id){document.getElementById(id).classList.remove("active")}

function exportarJSON(){
  const blob=new Blob([JSON.stringify(produtos,null,2)],{type:"application/json"});
  const a=document.createElement("a");
  a.href=URL.createObjectURL(blob);
  a.download="almoxarifado.json";
  a.click();
}

function limparDados(){
  if(confirm("Tem certeza?")){
    localStorage.clear();
    produtos=[...dadosIniciais];
    salvar();
  }
}
</script>
</body>
</html>
